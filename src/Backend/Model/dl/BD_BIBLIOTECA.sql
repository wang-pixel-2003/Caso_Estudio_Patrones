--CREACION DE SECUENCIAS

CREATE SEQUENCE SEC_USUARIOS
start with 1
increment by 1
minvalue 1;

CREATE SEQUENCE SEC_TIPO_LIBROS
start with 1
increment by 1
minvalue 1;

CREATE SEQUENCE SEC_PRESTAMOS_LIBROS
start with 1
increment by 1
minvalue 1;

CREATE SEQUENCE SEC_ROLES
start with 1
increment by 1
minvalue 1;

--CREACION DE TABLAS
CREATE TABLE USUARIOS(
ID_USUARIO INTEGER,
NOMBRE_COMPLETO VARCHAR(100),
DIRECCION VARCHAR(100),
TELEFONO VARCHAR(40),
USERNAME VARCHAR(40),
CONTRASENNA VARCHAR(40),
ID_ROL INTEGER
);

CREATE TABLE ROLES(
ID_ROL INTEGER,
DESCRIPCION_ROL VARCHAR(100)
);


CREATE TABLE LIBROS(
ID_LIBRO INTEGER,
TITULO VARCHAR(100),
AUTOR VARCHAR(100),
CATEGORIA VARCHAR(100),
ESTADO INTEGER
);

CREATE TABLE PRESTAMOS_LIBROS(
ID_PRESTAMO INTEGER,
ID_USUARIO INTEGER,--RELACIONAR EL CLIENTE AL LIBRO
ID_LIBRO INTEGER,
FECHA_DEVOLUCION DATE
);

--CONSTRAINTS
ALTER TABLE USUARIOS ADD CONSTRAINT PK_USER PRIMARY KEY(ID_USUARIO);

ALTER TABLE LIBROS ADD CONSTRAINT PK_ID_LIBRO PRIMARY KEY(ID_LIBRO);

ALTER TABLE ROLES ADD CONSTRAINT PK_ID_ROL PRIMARY KEY(ID_ROL);

ALTER TABLE PRESTAMOS_LIBROS ADD CONSTRAINT PK_ID_PRESTAMO PRIMARY KEY(ID_PRESTAMO);

ALTER TABLE PRESTAMOS_LIBROS ADD CONSTRAINT FK_ID_USUARIOS FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO);

ALTER TABLE PRESTAMOS_LIBROS ADD CONSTRAINT FK_ID_LIBROS FOREIGN KEY (ID_LIBRO) REFERENCES LIBROS(ID_LIBRO);

ALTER TABLE USUARIOS ADD CONSTRAINT FK_ID_ROL FOREIGN KEY (ID_ROL) REFERENCES ROLES(ID_ROL);


--GENERAR DATOS ROLES DE USUARIO
INSERT INTO ROLES VALUES(2,'CLIENTES');
INSERT INTO ROLES VALUES(1,'ADMINISTRADOR');
--GENERAR DATOS USUARIOS
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Steph','Heredia CR','88912354','steph123','1234',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Letta','Room 112','7816971837','lswancock0','hFFFqN89F6d',2);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Lynnell','Room 1165','8302828883','ltilburn1','xz3hTQgB',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Carley','15th Floor','6301815763','cmoxstead2','OLL75d4raY',2);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Slade','6th Floor','9874728124','syurenev3','xCOgpU0e',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Leonid','Suite 19','8159282510','lblowfelde4','J7mVBi61ESB',2);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Ruddie','PO Box 1761','7414606119','rfernier5','mfbQFDL',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Gottfried','Room 783','2023934133','gbaldack6','FnxNIoMH',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Saloma','9th Floor','3897482412','sglasson7','s1i5eQk',2);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Killian','Apt 662','7919020468','kbowen8','jPD2jFC75Pr',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Riannon','15th Floor','8629320016','rcheson9','1I15WPClEl',2);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Elvis','Suite 40','6954617439','eolyffa','x0ujVSrccNbS',2);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Thedrick','Room 1578','1163857915','tkippaxb','chgQeYsHxPcJ',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Tory','Apt 1399','9978416267','tcostenc','GBjhs8cSx8Oi',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Paxon','PO Box 22447','1269728651','pwittd','9BkIlCmJ9Aqk',1);
INSERT INTO USUARIOS VALUES(nextval('SEC_USUARIOS'),'Donica','Room 883','4064119358','dphilipsone','Goj2aHflq',2);

--GENERAR DATOS LIBROS
INSERT INTO LIBROS(ID_LIBRO,TITULO,AUTOR,CATEGORIA,ESTADO) VALUES(nextval('SEC_TIPO_LIBROS'),'El librito Misterioso 1','STEPH L.V','MIEDO',1);
INSERT INTO LIBROS(ID_LIBRO,TITULO,AUTOR,CATEGORIA,ESTADO) VALUES(nextval('SEC_TIPO_LIBROS'),'Dark Book','PEPE F','ROMANCE',1);
INSERT INTO LIBROS(ID_LIBRO,TITULO,AUTOR,CATEGORIA,ESTADO) VALUES(nextval('SEC_TIPO_LIBROS'),'Living in Oblivion','LOPEZ JR','AVENTURAS',1);
INSERT INTO LIBROS(ID_LIBRO,TITULO,AUTOR,CATEGORIA,ESTADO) VALUES(nextval('SEC_TIPO_LIBROS'),'League of Extraordinary','MARIO R.C','COMEDIA',1);
INSERT INTO LIBROS(ID_LIBRO,TITULO,AUTOR,CATEGORIA,ESTADO) VALUES(nextval('SEC_TIPO_LIBROS'),'Wicked Blood','JOSE P','DRAMA',1);

--GENERAR DATOS PRESTAMOS DE LOS LIBROS
INSERT INTO PRESTAMOS_LIBROS(ID_PRESTAMO,ID_USUARIO,ID_LIBRO,FECHA_DEVOLUCION) VALUES(nextval('SEC_PRESTAMOS_LIBROS'),19,6,current_date);
INSERT INTO PRESTAMOS_LIBROS(ID_PRESTAMO,ID_USUARIO,ID_LIBRO,FECHA_DEVOLUCION) VALUES(nextval('SEC_PRESTAMOS_LIBROS'),20,7,current_date);
INSERT INTO PRESTAMOS_LIBROS(ID_PRESTAMO,ID_USUARIO,ID_LIBRO,FECHA_DEVOLUCION) VALUES(nextval('SEC_PRESTAMOS_LIBROS'),25,8,current_date);



COMMIT;

--CONSULTA DE TABLAS
SELECT * FROM USUARIOS;

SELECT * FROM LIBROS;

SELECT * FROM PRESTAMOS_LIBROS;


--ELIMINAR TABLAS...
DROP TABLE PRESTAMOS_LIBROS;

DROP TABLE LIBROS;

DROP TABLE USUARIOS;

DROP TABLE ROLES;

--ELIMINAR SECUENCIAS

DROP SEQUENCE SEC_USUARIOS;

DROP SEQUENCE SEC_ROLES;

DROP SEQUENCE SEC_PRESTAMOS_LIBROS;

DROP SEQUENCE SEC_TIPO_LIBROS;